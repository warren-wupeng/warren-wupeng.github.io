<!DOCTYPE html><html><head><meta charset="utf-8"><title>读书笔记：第三章 模块化 Fundamentals of Software Architecture | tombstone of wupeng</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="第三章：模块化度量模块化三个关键概念：  内聚性（cohesion） 耦合性（coupling） 共生性（connascence）  内聚性内聚性是指一个模块的所有部分必须在一起的程度。换句话说就是度量各个模块必须在一起的程度。理想状态下，一个内聚的模块所有的部分都必须在一起，因为如果把它们分成更小的碎片，就会导致其他模块必须通过模块间调用来得到有用结果，从而使得模块间更加耦合。 内聚性度量，从最"><meta property="og:type" content="article"><meta property="og:title" content="读书笔记：第三章 模块化 Fundamentals of Software Architecture"><meta property="og:url" content="http://wupeng.tech/2021/08/04/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0%EF%BC%9A%E7%AC%AC%E4%B8%89%E7%AB%A0-%E6%A8%A1%E5%9D%97%E5%8C%96-Fundamentals-of-Software-Architecture/index.html"><meta property="og:site_name" content="tombstone of wupeng"><meta property="og:description" content="第三章：模块化度量模块化三个关键概念：  内聚性（cohesion） 耦合性（coupling） 共生性（connascence）  内聚性内聚性是指一个模块的所有部分必须在一起的程度。换句话说就是度量各个模块必须在一起的程度。理想状态下，一个内聚的模块所有的部分都必须在一起，因为如果把它们分成更小的碎片，就会导致其他模块必须通过模块间调用来得到有用结果，从而使得模块间更加耦合。 内聚性度量，从最"><meta property="og:locale" content="en_US"><meta property="article:published_time" content="2021-08-04T08:44:48.000Z"><meta property="article:modified_time" content="2021-08-05T03:03:02.944Z"><meta property="article:author" content="wupeng"><meta name="twitter:card" content="summary"><link rel="icon" href="/favicon.png"><link href="https://fonts.googleapis.com/css?family=Crimson+Text:400,700|Inconsolata|Oswald" rel="stylesheet"><link rel="stylesheet" href="/icomoon/style.css"><link rel="stylesheet" href="/style.css"><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="tombstone of wupeng" type="application/atom+xml">
</head><body><div class="site-wrapper is_post_page"><div id="loading-bar-wrapper"><div id="loading-bar"></div></div><script>document.getElementById("loading-bar").style.width="20%"</script><header id="header" class="site-header clearfix"><a class="logo square clearfix" href="/"><span class="w">W</span> <span class="b">U</span> <span class="w">P</span> <span class="b">E</span> <span class="b">N</span> <span class="b">G</span> </a><a class="me square site-nav-switch clearfix"><span class="b"><span class="icon icon-menu"></span></span></a></header><script>document.getElementById("loading-bar").style.width="40%"</script><main id="main" class="clearfix"><article id="post-读书笔记：第三章-模块化-Fundamentals-of-Software-Architecture" class="article white-box article-type-post" itemscope itemprop="blogPost"><header class="article-header"><h1 class="article-title" itemprop="name">读书笔记：第三章 模块化 Fundamentals of Software Architecture</h1><div class="article-meta">Posted on <time class="article-time" datetime="2021-08-04T08:44:48.000Z" itemprop="datePublished">Aug 4, 2021</time></div></header><div class="article-entry" itemprop="articleBody"><h1 id="第三章：模块化"><a href="#第三章：模块化" class="headerlink" title="第三章：模块化"></a>第三章：模块化</h1><h2 id="度量模块化"><a href="#度量模块化" class="headerlink" title="度量模块化"></a>度量模块化</h2><p>三个关键概念：</p><ul><li>内聚性（cohesion）</li><li>耦合性（coupling）</li><li>共生性（connascence）</li></ul><h3 id="内聚性"><a href="#内聚性" class="headerlink" title="内聚性"></a>内聚性</h3><p>内聚性是指一个模块的所有部分必须在一起的程度。换句话说就是度量各个模块必须在一起的程度。理想状态下，一个内聚的模块所有的部分都必须在一起，因为如果把它们分成更小的碎片，就会导致其他模块必须通过模块间调用来得到有用结果，从而使得模块间更加耦合。</p><p>内聚性度量，从最好到最差</p><ul><li>功能内聚：模块的每个组件都互相关联，并且模块只包含对功能必要的模块</li><li>顺序内聚：两个模块互动，一个模块输出数据，成为另一个模块的输入</li><li>通讯内聚：两个模块形成一个通讯链，每个模块各自操作信息并且/或者产生一些产出。例如，添加一个记录到数据库并基于这些信息生成一个email</li><li>流程内聚：两个模块必须以一定顺序执行代码</li><li>时间内聚：模块在时间上依赖</li><li>逻辑内聚：模块内的数据逻辑上相关而非功能上相关。例如：有一个模块从文本，序列化对象或流中转化信息。操作是相关的但是功能是很不一样的。</li><li>意外耦合：模块中的要素除了在同一个源文件中以外互不相关。这是最糟糕的一种内聚</li></ul><p>内聚性并不像耦合性一样有精确的度量指标。<br>一种度量方法<br>LCOM（Lack of Cohension in Methods)</p><blockquote><p>没有共用字段的方法数量</p></blockquote><h3 id="耦合性"><a href="#耦合性" class="headerlink" title="耦合性"></a>耦合性</h3><ul><li>输入耦合：度量从外向内的连接数</li><li>输出耦合：度量从内向外的连接数</li></ul><h4 id="抽象性，不稳定性和主序列距离"><a href="#抽象性，不稳定性和主序列距离" class="headerlink" title="抽象性，不稳定性和主序列距离"></a>抽象性，不稳定性和主序列距离</h4><p>抽象性是指抽象和实现的比例。度量抽象和实现的比例。例如：假如一个代码仓库只有一个main函数，这个代码仓的抽象度为0.另一个极端是，一个代码库有太多抽象，让开发者难以理解</p><p>不稳定性度量代码的易变性。例如，假如一个类调用了很多其他类的方法，那它就很不稳定</p><p>抽象的代码通常更稳定，但是更无用，更难理解。<br>当我们对代码做抽象的时候需要考虑它带来多少稳定性，否则付出的难以理解就是不值得的。</p><h3 id="共生性（Connascence）"><a href="#共生性（Connascence）" class="headerlink" title="共生性（Connascence）"></a>共生性（Connascence）</h3><p>如果两个模块，其中一个的改变需要另一个也相应改变以保持系统整体的正确性，那么我们说这个两个模块是共生的</p><p>两类共生性</p><ul><li>静态共生性</li><li>动态共生性</li></ul><p>各种共生性按从优到差的顺序排列依次是：</p><p>静态共生性包括</p><ul><li>命名共生性：模块之间必须约定实体命名</li><li>类型共生性：模块之间必须约定实体的类型</li><li>意义共生性：模块之间必须约定实体的意义</li><li>位置共生性：模块之间必须约定实体的顺序</li><li>算法共生性：模块之间必须约定算法</li></ul><p>动态共生性包括</p><ul><li>执行共生性：模块之间的执行顺序影响结果</li><li>时间共生性：多个模块的执行时间点影响结果。例如两个线程使用同一内存的同时执行</li><li>值共生生性：多个值必须同时更改。例如用四个顶点坐标来表示一个长方形，那么为了保持数据结构的完整性，就不能随意修改单独一个点的坐标</li><li>身份共生性：多个模块必须引用同一实体</li></ul><p>代码重构时，要把差的共生关系改变成更好的共生关系</p><h4 id="区域性"><a href="#区域性" class="headerlink" title="区域性"></a>区域性</h4><p>距离很远的模块有强共生性就意味着糟糕的耦合，而距离相近的代码具有共生性是可以的。</p><h4 id="程度"><a href="#程度" class="headerlink" title="程度"></a>程度</h4><p>共生的程度是指影响的规模。只是影响很少的类还是很多？假如你只有很少几个模块，那么有动态共生性也不是很可怕，但是，通常代码会随时间增长让问题越来越大</p><p>提升系统模块化的三个建议</p><ol><li>通过把系统拆分成多个封装要素最小化整体共生性</li><li>最小化其他遗留的跨越封装边界的共生性</li><li>最大化封装边界内部的共生性</li></ol><p>传奇的软件架构创新者Jim Weirich的两条建议：</p><ul><li>影响法则：把影响大的共生性转化成弱的共生性</li><li>区域法则：软件要素之间的距离越远，越要使用更弱的共生性</li></ul><p>以上是1990年代的共生性理论，它对于现代架构师面临的问题并没有给出解决方案</p></div><div class="article-tags"></div></article><script>document.getElementById("loading-bar").style.width="60%"</script></main><footer id="footer" class="clearfix"><div>&copy; <a href="http://wupeng.tech">tombstone of wupeng</a> Theme by <a href="http://artifact.me/" target="_blank">Art Chen</a>.</div><div>Powered by <a target="_blank" href="https://hexo.io/" rel="external noopener">Hexo</a>.</div></footer><script>document.getElementById("loading-bar").style.width="80%"</script><div class="overlay"></div></div><div class="site-sidebar"><div class="sidebar-switch clearfix" style="display:none"><a class="dark-btn active" data-toggle="toc"><span class="icon icon-list"></span> <span class="text">Index</span> </a><a class="dark-btn" data-toggle="bio"><span class="icon icon-person"></span> <span class="text">Bio</span></a></div><div class="site-toc" style="display:none"><div class="no-index">No Index</div></div><div class="site-bio show" style="display:block"><div class="about-me clearfix"><div class="avatar"><img src="/img/avatar.webp"></div><div class="info"><a class="name dark-btn" href="/about">wupeng</a></div><div class="info"><span class="item desc">This is the proof that I have lived</span></div></div><div class="social clearfix"><a href="/atom.xml" class="feed" target="_blank" rel="external"><span class="icon icon-feed"></span> </a><a href="https://github.com/artchen" class="github" target="_blank" rel="external"><span class="icon icon-github"></span></a></div></div><div class="shortcuts"><a href="#header" class="top window-nav dark-btn" id="go-top"><span class="icon icon-chevron-thin-up"></span> </a><a class="close dark-btn" id="sidebar-close"><span class="icon icon-close"></span> </a><a href="#footer" class="top window-nav dark-btn" id="go-bottom"><span class="icon icon-chevron-thin-down"></span></a></div></div><script type="text/javascript">var GOOGLE_CUSTOM_SEARCH_API_KEY="",GOOGLE_CUSTOM_SEARCH_ENGINE_ID="",ALGOLIA_API_KEY="",ALGOLIA_APP_ID="",ALGOLIA_INDEX_NAME="",AZURE_SERVICE_NAME="",AZURE_INDEX_NAME="",AZURE_QUERY_KEY="",BAIDU_API_ID="",SEARCH_SERVICE="google",universalSearchConfig={};"google"===SEARCH_SERVICE?universalSearchConfig={searchService:SEARCH_SERVICE,apiKey:GOOGLE_CUSTOM_SEARCH_API_KEY,engineId:GOOGLE_CUSTOM_SEARCH_ENGINE_ID,imagePath:"/img/"}:"algolia"===SEARCH_SERVICE?universalSearchConfig={searchService:SEARCH_SERVICE,apiKey:ALGOLIA_API_KEY,appId:ALGOLIA_APP_ID,indexName:ALGOLIA_INDEX_NAME,imagePath:"/img/"}:"azure"===SEARCH_SERVICE&&(universalSearchConfig={searchService:SEARCH_SERVICE,serviceName:AZURE_SERVICE_NAME,indexName:AZURE_INDEX_NAME,apiKey:AZURE_QUERY_KEY,imagePath:"/img/"})</script><script src="https://code.jquery.com/jquery-2.1.4.min.js"></script><script>window.jQuery||document.write('<script src="/js/jquery.js"><\/script>')</script><script src="/js/search.js"></script><script src="/js/app.js"></script><script>document.getElementById("loading-bar").style.width="100%"</script></body></html>